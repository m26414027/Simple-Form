<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Forgot Password</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="font-awesome/css/font-awesome.min.css">
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-md-offset-4">
				<div class="form" style="margin-top: 130px;">
					<div class="col-sm-12">
						<h3><strong>Reset your password</strong></h3>
					</div>
					<form>
						<div class="form-group">
							<input type="text" name="email" placeholder="Email address" class="form-control" required>
						</div>
						<button class="btn btn-success btn-block">Reset password</button>
					</form><br/>
					<p class="tulisan"><a href="signin.html">Sign in</a></p>
				</div><br/>
				<p id="bottom-center">Do you have trouble signing in?</p>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript">
	var QueryString = function (){
		var query_string = {};
		var query = window.location.search.substring(1);
		var vars = query.split("&");
		for (var i=0;i<vars.length;i++) {
			var pair = vars[i].split("=");
			if (typeof query_string[pair[0]] === "undefined") {
				query_string[pair[0]] = decodeURIComponent(pair[1]);
			} else if (typeof query_string[pair[0]] === "string") {
				var arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];
				query_string[pair[0]] = arr;
			} else {
				query_string[pair[0]].push(decodeURIComponent(pair[1]));
			}
		}
	  	console.log(query_string);
	  	check(query_string);
	}();
	function check(query_string){
		var retrievedObject = localStorage.getItem('testObject');
		var status = 0;
		if (typeof retrievedObject != 'undefined' && retrievedObject != null){
			testObject = JSON.parse(retrievedObject);
			console.log(testObject);
		}
		for (var i = 0; i < testObject.length; i++){
			if (query_string.email == 'undefined' || query_string.email == null){
			}else if(query_string.email == testObject[i].email){
				testObject[i].password = "joe";
				status=1;
				break;
			}else{
				status=2;
			}
		}
		if(status == 1){
			console.log(testObject);
			alert("Hello " + testObject[i].firstname + " " + testObject[i].lastname+", your password has been reset to joe. Please try and login once more.");
			localStorage.setItem('testObject', JSON.stringify(testObject));
		}else if(status == 2){
			console.log("An error has occured. Please Try again.");
		}
	}
</script>
</html>